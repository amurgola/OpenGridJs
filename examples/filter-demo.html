<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenGridJs - Column Filtering Demo</title>
    <link rel="stylesheet" href="../src/opengrid.css">
    <script src="../src/opengrid.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            padding: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        h1 {
            color: white;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .description {
            color: white;
            text-align: center;
            margin-bottom: 30px;
            font-size: 1.2em;
            opacity: 0.95;
        }
        
        .filter-demo {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .instructions {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #0ea5e9;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #1a1a1a;
        }
        
        .instructions ul {
            margin: 10px 0;
            padding-left: 20px;
            color: #6b7280;
        }
        
        .instructions li {
            margin: 5px 0;
        }
        
        .test-grid {
            height: 500px;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-value {
            font-size: 2em;
            font-weight: bold;
            color: #0ea5e9;
        }
        
        .stat-label {
            color: #6b7280;
            margin-top: 5px;
        }
        
        .clear-filters-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: #ef4444;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.2s;
        }
        
        .clear-filters-btn:hover {
            background: #dc2626;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Column Filtering Demo</h1>
        <p class="description">Experience Excel-like filtering with OpenGridJs</p>
        
        <div class="filter-demo">
            <div class="instructions">
                <h3>How to Use Column Filters:</h3>
                <ul>
                    <li>Click the <strong>‚ñº</strong> button in any column header to open the filter menu</li>
                    <li>Use checkboxes to select/deselect values you want to show</li>
                    <li>Use the search box to quickly find specific values</li>
                    <li>Click "Select All" or "Clear All" for bulk selection</li>
                    <li>Apply filters from multiple columns simultaneously</li>
                    <li>Active filters are highlighted in blue</li>
                </ul>
            </div>
            
            <div class="test-grid"></div>
            
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalRows">0</div>
                    <div class="stat-label">Total Rows</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="visibleRows">0</div>
                    <div class="stat-label">Visible Rows</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="activeFilters">0</div>
                    <div class="stat-label">Active Filters</div>
                </div>
            </div>
            
            <button class="clear-filters-btn" onclick="clearAllFilters()">Clear All Filters</button>
        </div>
    </div>
    
    <script>
        // Generate sample data with various categories
        const sampleData = [];
        const departments = ['Engineering', 'Sales', 'Marketing', 'HR', 'Finance', 'Operations'];
        const statuses = ['Active', 'Inactive', 'Pending', 'On Leave'];
        const locations = ['New York', 'San Francisco', 'London', 'Tokyo', 'Berlin', 'Sydney'];
        const roles = ['Manager', 'Senior', 'Junior', 'Lead', 'Director', 'Intern'];
        
        for (let i = 1; i <= 100; i++) {
            sampleData.push({
                id: i,
                name: `Employee ${i}`,
                department: departments[Math.floor(Math.random() * departments.length)],
                role: roles[Math.floor(Math.random() * roles.length)],
                location: locations[Math.floor(Math.random() * locations.length)],
                salary: Math.floor(Math.random() * 100000) + 40000,
                status: statuses[Math.floor(Math.random() * statuses.length)],
                experience: Math.floor(Math.random() * 20) + 1
            });
        }
        
        // Initialize grid with column configuration
        const setup = {
            columnHeaderNames: [
                { columnName: 'id', columnNameDisplay: 'ID', columnWidth: '60px' },
                { columnName: 'name', columnNameDisplay: 'Name', columnWidth: '150px' },
                { columnName: 'department', columnNameDisplay: 'Department' },
                { columnName: 'role', columnNameDisplay: 'Role' },
                { columnName: 'location', columnNameDisplay: 'Location' },
                { 
                    columnName: 'salary', 
                    columnNameDisplay: 'Salary',
                    format: (value) => `$${value.toLocaleString()}`
                },
                { columnName: 'status', columnNameDisplay: 'Status' },
                { 
                    columnName: 'experience', 
                    columnNameDisplay: 'Experience',
                    format: (value) => `${value} years`
                }
            ]
        };
        
        // Create grid instance
        const grid = new OpenGrid('test-grid', sampleData, 500, setup);
        
        // Update statistics
        function updateStats() {
            document.getElementById('totalRows').textContent = sampleData.length;
            document.getElementById('visibleRows').textContent = grid.gridData.length;
            document.getElementById('activeFilters').textContent = Object.keys(grid.columnFilters).length;
        }
        
        // Clear all filters
        function clearAllFilters() {
            grid.clearAllFilters();
            updateStats();
        }
        
        // Monitor for filter changes
        const originalApplyFilter = grid.applyColumnFilter.bind(grid);
        grid.applyColumnFilter = function(column, selectedValues) {
            originalApplyFilter(column, selectedValues);
            updateStats();
        };
        
        // Initial stats update
        updateStats();
    </script>
</body>
</html>